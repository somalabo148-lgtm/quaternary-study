<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>第四紀学 最終試験対策 100問（正解表示版）</title>
<style>
    :root { --primary: #2c3e50; --accent: #3498db; --correct: #27ae60; --wrong: #e74c3c; --bg: #f0f2f5; }
    body { font-family: "Helvetica Neue", Arial, sans-serif; background-color: var(--bg); color: #333; margin: 0; padding-bottom: 60px; line-height: 1.6; }
    
    /* ヘッダー */
    header { background: var(--primary); color: white; padding: 15px; text-align: center; position: sticky; top: 0; z-index: 100; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }
    h1 { margin: 0; font-size: 1.2rem; }
    .status-bar { font-size: 0.9rem; margin-top: 5px; opacity: 0.9; }

    /* コンテナ */
    .container { max-width: 800px; margin: 20px auto; padding: 0 15px; }
    
    /* カード */
    .card { background: white; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); padding: 25px; margin-bottom: 20px; animation: slideIn 0.3s ease-out; }
    @keyframes slideIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    
    .q-meta { font-size: 0.85rem; color: #7f8c8d; margin-bottom: 10px; font-weight: bold; display: flex; justify-content: space-between; }
    .q-text { font-size: 1.15rem; font-weight: bold; margin-bottom: 25px; border-left: 4px solid var(--accent); padding-left: 15px; }

    /* 選択肢ボタン */
    .choices { display: flex; flex-direction: column; gap: 10px; }
    .choice-btn { 
        padding: 15px; border: 2px solid #e9ecef; border-radius: 8px; background: #fff; 
        text-align: left; font-size: 1rem; cursor: pointer; transition: all 0.2s; position: relative;
    }
    .choice-btn:hover { background-color: #f8f9fa; border-color: #dee2e6; }
    
    /* 正誤判定スタイル */
    .choice-btn.correct { background-color: #d4edda; border-color: #c3e6cb; color: #155724; font-weight: bold; }
    .choice-btn.correct::after { content: "⭕ 正解"; position: absolute; right: 15px; font-size: 0.9em; }
    
    .choice-btn.wrong { background-color: #f8d7da; border-color: #f5c6cb; color: #721c24; opacity: 0.8; }
    .choice-btn.wrong::after { content: "❌ 不正解"; position: absolute; right: 15px; font-size: 0.9em; }
    
    /* 解説エリア */
    .explanation { display: none; margin-top: 20px; padding: 20px; background: #e8f4fd; border-radius: 8px; border-left: 5px solid var(--accent); font-size: 0.95rem; }
    .btn-next { display: block; width: 100%; margin-top: 20px; padding: 15px; background: var(--primary); color: white; border: none; border-radius: 8px; font-size: 1.1rem; cursor: pointer; font-weight: bold; }
    .btn-next:hover { background: #34495e; }

    /* 結果画面 */
    .result-screen { text-align: center; padding: 40px 20px; }
    .score-circle { width: 150px; height: 150px; background: var(--accent); color: white; border-radius: 50%; display: flex; justify-content: center; align-items: center; font-size: 2.5rem; font-weight: bold; margin: 0 auto 30px; }
</style>
</head>
<body>

<header>
    <h1>第四紀学 100問ノック</h1>
    <div class="status-bar" id="status">読込中...</div>
</header>

<div class="container" id="app"></div>

<script>
// ==========================================
//  100問の問題データ
//  ※正解は必ず配列の [0] 番目
// ==========================================
const quizData = [
    // --- 1. テフラ・火山 (18問) ---
    { cat: "テフラ", q: "火山灰アトラスにおいて、鉱物記号「opx」が指す鉱物はどれか。", a: ["斜方輝石", "単斜輝石", "角閃石", "石英"], exp: "opx = Orthopyroxene（斜方輝石）。cpxは単斜輝石、hoは角閃石です。" },
    { cat: "テフラ", q: "火山灰アトラスにおいて、鉱物記号「cpx」が指す鉱物はどれか。", a: ["単斜輝石", "斜方輝石", "黒雲母", "カンラン石"], exp: "cpx = Clinopyroxene（単斜輝石）です。" },
    { cat: "テフラ", q: "火山灰アトラスにおいて、鉱物記号「ho」が指す鉱物はどれか。", a: ["角閃石", "石英", "長石", "ジルコン"], exp: "ho = Hornblende（角閃石）です。" },
    { cat: "テフラ", q: "火山灰アトラスにおいて、鉱物記号「qt」が指す鉱物はどれか。", a: ["石英", "火山ガラス", "磁鉄鉱", "黒雲母"], exp: "qt = Quartz（石英）です。" },
    { cat: "テフラ", q: "テフラ同定の「3つの決め手」の正しい組み合わせはどれか。", a: ["層位・鉱物組成・屈折率", "色・粒度・層厚", "磁気・密度・硬度", "層位・色・年代"], exp: "層位（重なり方）、鉱物の種類（組成）、ガラス等の屈折率で特定します。" },
    { cat: "テフラ", q: "噴煙柱が成層圏まで達し、広範囲に及ぶ噴火様式はどれか。", a: ["プリニー式噴火", "ストロンボリ式噴火", "ハワイ式噴火", "ブルカノ式噴火"], exp: "粉砕度(F)・拡散度(D)ともに高い大規模な噴火です。" },
    { cat: "テフラ", q: "マグマが水と接触して爆発的に破砕される噴火はどれか。", a: ["水蒸気プリニー式噴火", "プリニー式噴火", "ストロンボリ式噴火", "ハワイ式噴火"], exp: "急冷により非常に細かい粒子になるのが特徴です。" },
    { cat: "テフラ", q: "高温の火砕流が自重と熱で再融着してできた岩石は何か。", a: ["溶結凝灰岩", "軽石流堆積物", "泥岩", "安山岩"], exp: "Welded Tuffと呼ばれ、硬い岩盤になります。" },
    { cat: "テフラ", q: "広域テフラ「K-Ah」の正式名称はどれか。", a: ["鬼界アカホヤ火山灰", "姶良Tn火山灰", "阿蘇4火山灰", "洞爺火山灰"], exp: "約7300年前。西日本〜東北まで分布します。" },
    { cat: "テフラ", q: "広域テフラ「AT」の正式名称はどれか。", a: ["姶良Tn火山灰", "阿蘇4火山灰", "白頭山苫小牧火山灰", "御岳第一軽石"], exp: "約3万年前。日本全土を覆う重要な鍵層です。" },
    { cat: "テフラ", q: "広域テフラ「Aso-4」の正式名称はどれか。", a: ["阿蘇4火山灰", "姶良火山灰", "浅間板鼻軽石", "支笏第一軽石"], exp: "約9万年前の阿蘇カルデラの巨大噴火によるものです。" },
    { cat: "テフラ", q: "大阪層群の鍵層「アズキ火山灰」のおよその年代はいつか。", a: ["約85万年前", "約78万年前", "約12万年前", "約258万年前"], exp: "M-B境界（78万年前）より少し古い層準にあります。" },
    { cat: "テフラ", q: "アズキ火山灰と松山-ブリュンヌ境界(M-B)の上下関係は？", a: ["アズキ火山灰の方が下（古い）", "アズキ火山灰の方が上（新しい）", "ほぼ同時期", "無関係"], exp: "アズキ火山灰(0.85Ma)はM-B境界(0.78Ma)より下位です。" },
    { cat: "テフラ", q: "降下軽石（Pumice）の主な色はどれか。", a: ["白色・淡色", "黒色", "赤色", "緑色"], exp: "軽石は酸性マグマ由来で白っぽく、多孔質です。" },
    { cat: "テフラ", q: "降下スコリア（Scoria）の主な色はどれか。", a: ["黒色・暗色", "白色", "黄色", "透明"], exp: "玄武岩〜安山岩質で鉄分が多く黒っぽいです。" },
    { cat: "テフラ", q: "屈折率測定における「n」は何の屈折率を示すか。", a: ["火山ガラス", "角閃石", "斜方輝石", "石英"], exp: "通常、火山ガラスの屈折率をnと表記します。" },
    { cat: "テフラ", q: "爆発の衝撃で地表を高速で広がる、密度の低い流れは何か。", a: ["ベースサージ", "火砕流", "泥流", "溶岩流"], exp: "火砕流よりガスが多く、乱流として広がります。" },
    { cat: "テフラ", q: "イグニムブライトとは何の堆積物の総称か。", a: ["大規模な軽石流堆積物", "降下火山灰", "溶岩流", "火山泥流"], exp: "溶結凝灰岩を含む火砕流堆積物の総称です。" },

    // --- 2. 年代測定 (18問) ---
    { cat: "年代測定", q: "C14年代測定で、計算に慣習的に使われる「リビーの半減期」は何年か。", a: ["5568年", "5730年", "1万年", "2500年"], exp: "物理的に正しいのは5730年ですが、慣習として5568年を使います。" },
    { cat: "年代測定", q: "放射性炭素(C14)は大気上層で何と何が衝突してできるか。", a: ["中性子と窒素(14N)", "陽子と酸素", "電子と炭素", "中性子と水素"], exp: "宇宙線起源の中性子が窒素原子核に衝突して生成されます。" },
    { cat: "年代測定", q: "C14年代測定の測定限界（上限）はおよそ過去何万年か。", a: ["約5万年", "約100万年", "約1万年", "約20万年"], exp: "これ以上古いとC14が減少しすぎて測定できません。" },
    { cat: "年代測定", q: "現在主流のAMS法（加速器質量分析）の最大の利点は？", a: ["微量（約1mg）で短時間に測定可能", "大量試料で高精度", "装置が安価", "半減期に関係なく測定可能"], exp: "炭素原子を直接数えるため、従来法より圧倒的に効率が良いです。" },
    { cat: "年代測定", q: "C14年代測定の試料として「最も信頼性が高い」ものは？", a: ["種子・木片・樹皮", "地層中の太い根", "土壌全体(バルク)", "再堆積した流木"], exp: "その地層ができた当時のものである確実性が高いためです。" },
    { cat: "年代測定", q: "C14年代測定で「避けるべき」コンタミ試料はどれか。", a: ["地層を貫く植物の根", "炭化した種子", "昆虫の羽", "落ち葉"], exp: "根は新しい時代に侵入するため、年代が若く出てしまいます。" },
    { cat: "年代測定", q: "「暦年較正」が必要な主な理由は何か。", a: ["過去の大気中C14濃度が一定でないため", "生物種で吸収率が違うため", "実験誤差のため", "半減期が変化するため"], exp: "太陽活動などの影響でC14生成量が変化しているためです。" },
    { cat: "年代測定", q: "暦年較正に用いる標準データセットの名称は？", a: ["IntCal (イントカル)", "Excel", "SPECMAP", "LR04"], exp: "年輪年代などに基づいた国際的な較正曲線です。" },
    { cat: "年代測定", q: "「海洋リザーバー効果」とはどのような現象か。", a: ["海洋生物の年代が古く測定される", "海洋生物の年代が新しく測定される", "海水中ではC14が濃縮される", "深海生物は測定不能"], exp: "古い炭素を含む深層水の影響で、見かけ上約400年古く出ます。" },
    { cat: "年代測定", q: "年代値「cal BP」の基準となる「現在」は西暦何年か。", a: ["1950年", "2000年", "0年", "1868年"], exp: "核実験の影響が出る前の1950年を0 BPとしています。" },
    { cat: "年代測定", q: "層序情報などを加えて年代を絞り込む統計手法は？", a: ["ベイズ統計モデリング", "最小二乗法", "相関分析", "主成分分析"], exp: "「下の層は上の層より古い」といった事前情報を利用します。" },
    { cat: "年代測定", q: "生物の同位体分別（12Cを好む性質）の補正に使う指標は？", a: ["δ13C", "δ18O", "δ15N", "δD"], exp: "安定同位体である13Cの比率で補正します。" },
    { cat: "年代測定", q: "K-Ar法（カリウム-アルゴン法）の主な測定対象は？", a: ["火山岩・鉱物", "木材", "貝殻", "骨"], exp: "数万年〜数億年前の無機物の年代測定に適しています。" },
    { cat: "年代測定", q: "日本周辺の海洋リザーバー効果による年代のズレの目安は？", a: ["約400年", "約1000年", "約10年", "約5000年"], exp: "世界平均で約400年ですが、地域差（ΔR）があります。" },
    { cat: "年代測定", q: "C14年代「2000 BP」はおよそいつか。", a: ["西暦紀元前後（BC50年頃）", "2000年前（縄文時代）", "2000年（現代）", "1950年"], exp: "1950年から2000年前なので、およそ紀元前です。" },
    { cat: "年代測定", q: "第四紀（Quaternary）の始まりの年代はいつか。", a: ["約258万年前", "約170万年前", "約1.17万年前", "約6500万年前"], exp: "2.58Ma。ガウス-松山境界とほぼ一致します。" },
    { cat: "年代測定", q: "更新世と完新世の境界年代はいつか。", a: ["約1.17万年前", "約10万年前", "約258万年前", "約2万年前"], exp: "ヤンガー・ドライアス期の終了をもって境界とします。" },
    { cat: "年代測定", q: "約78万年前の地磁気逆転境界は？", a: ["松山-ブリュンヌ境界", "ガウス-松山境界", "オルドバイ境界", "ハラミヨ境界"], exp: "現在の正磁極期（ブリュンヌ）の始まりです。" },

    // --- 3. 調査法・コア (15問) ---
    { cat: "調査・コア", q: "「ハンディジオスライサー」の最大の特徴は？", a: ["地層を乱さず幅広試料が取れる", "地下100mまで掘れる", "非常に安価", "岩盤を掘削できる"], exp: "津波堆積物の葉理など、微細な堆積構造の観察に最適です。" },
    { cat: "調査・コア", q: "「ハンドコアラー」の説明として正しいのは？", a: ["人力で運べるが深度は数mが限界", "地層の方位を保存できる", "礫層も掘れる", "幅広の試料が取れる"], exp: "手軽ですが、深さや試料の量、連続性に限界があります。" },
    { cat: "調査・コア", q: "「トレンチ調査」の最大の利点は？", a: ["地層の横方向の連続性を観察できる", "地下深部まで調査できる", "水没地でも調査できる", "一人で実施できる"], exp: "断層の変位などを壁面で直接確認できます。" },
    { cat: "調査・コア", q: "「機械式ボーリング」の主な欠点は？", a: ["費用が非常に高額", "深い試料が取れない", "硬い岩盤は掘れない", "試料が細切れになる"], exp: "深くまで掘れますが、コストがかかります。" },
    { cat: "調査・コア", q: "コア記載（ディスクリプション）の鉄則は？", a: ["「解釈」でなく「事実」を書く", "最初から「津波堆積物」と書く", "色は記録しなくてよい", "粒度は感覚でよい"], exp: "客観的な観察事実（色、粒度、構造）を記録します。" },
    { cat: "調査・コア", q: "砂層の粒度分析で有機物を除去する薬品は？", a: ["過酸化水素水", "塩酸", "水酸化ナトリウム", "アルコール"], exp: "有機物を分解するためにH2O2を使います。" },
    { cat: "調査・コア", q: "「海」か「湖」かの環境判定に最も有効な微化石は？", a: ["珪藻（けいそう）", "花粉", "大型植物片", "火山ガラス"], exp: "塩分濃度に応じた種の棲み分けが明瞭だからです。" },
    { cat: "調査・コア", q: "堆積物コアの非破壊分析で内部構造を透視する手法は？", a: ["CTスキャン", "ITRAX", "帯磁率測定", "粒度分析"], exp: "医療用と同じ原理で、巣穴や層構造を可視化します。" },
    { cat: "調査・コア", q: "ITRAX（コアスキャナー）で測定できるデータは？", a: ["元素組成（Ti, Fe等）の連続分布", "放射性炭素年代", "微化石の種類", "帯磁率"], exp: "X線を用いて元素の変化を連続的に測定します。" },
    { cat: "調査・コア", q: "水月湖の堆積物に見られる1年ごとの縞模様は？", a: ["年縞（Varves）", "ラミナ", "クロスラミナ", "級化構造"], exp: "季節変化による堆積リズムが保存されたもので、高精度な年代指標です。" },
    { cat: "調査・コア", q: "コア記載項目「淘汰度（Sorting）」が良いとは？", a: ["粒の大きさが揃っている", "粒の大きさがバラバラ", "礫が多い", "泥だけである"], exp: "粒径が均一な状態を「淘汰が良い」と言います。" },
    { cat: "調査・コア", q: "海域断層調査で、音波で地層断面を調べる方法は？", a: ["音波探査", "トレンチ調査", "ハンドコアリング", "重力探査"], exp: "海底下の断層のズレなどを可視化します。" },
    { cat: "調査・コア", q: "空中写真等から断層による地形のズレを読み取る作業は？", a: ["変動地形（リニアメント）判読", "地質図作成", "重力測定", "古文書解読"], exp: "活断層調査の第一歩となる作業です。" },
    { cat: "調査・コア", q: "地層が下から上へ「粗粒→細粒」と変化する構造は？", a: ["級化構造（グレーディング）", "逆級化構造", "平行葉理", "斜交葉理"], exp: "水流が弱まるときなどに形成されます。" },
    { cat: "調査・コア", q: "洪水で堤防が決壊してできる扇状の堆積物は？", a: ["決壊堆積物（クレバススプレー）", "自然堤防", "後背湿地", "三角州"], exp: "堤防を破った強い流れが土砂を一気に堆積させます。" },

    // --- 4. 気候・海洋 (18問) ---
    { cat: "気候・海洋", q: "ミランコビッチ・サイクルの3要素に含まれないのは？", a: ["太陽黒点周期", "離心率", "地軸の傾き", "歳差運動"], exp: "ミランコビッチ・サイクルは「地球の軌道要素」の変化です。" },
    { cat: "気候・海洋", q: "ミランコビッチ・サイクル「離心率」の周期は？", a: ["約10万年", "約4.1万年", "約2.3万年", "約1万年"], exp: "公転軌道が円〜楕円に変わるサイクルです。" },
    { cat: "気候・海洋", q: "ミランコビッチ・サイクル「地軸の傾き」の周期は？", a: ["約4.1万年", "約10万年", "約2.3万年", "約1000年"], exp: "傾きの変化は高緯度の日射量に強く影響します。" },
    { cat: "気候・海洋", q: "ミランコビッチ・サイクル「歳差運動」の周期は？", a: ["約2.3万年", "約10万年", "約4.1万年", "約50万年"], exp: "自転軸の首振り運動です。" },
    { cat: "気候・海洋", q: "地軸の傾きが大きくなると気候はどうなる？", a: ["夏の日射量が増え、氷が解けやすい", "夏の日射量が減り、氷が増える", "冬が暖かくなる", "変化しない"], exp: "極域への夏の日射が増えるため、間氷期になりやすくなります。" },
    { cat: "気候・海洋", q: "約100万年前に卓越周期が4万→10万年に変わったイベントは？", a: ["中更新世気候変遷（MPT）", "ヤンガー・ドライアス", "ハインリッヒ・イベント", "マウンダー極小期"], exp: "これにより、氷期・間氷期の振幅が大きくなりました。" },
    { cat: "気候・海洋", q: "地球の平均アルベド（反射率）はおよそ何％か。", a: ["約30%", "約10%", "約50%", "約80%"], exp: "雲や雪氷などが太陽光を反射する割合です。" },
    { cat: "気候・海洋", q: "氷床拡大→反射増→寒冷化のフィードバックを何と呼ぶ？", a: ["アイス・アルベド・フィードバック", "温室効果フィードバック", "水蒸気フィードバック", "雲フィードバック"], exp: "氷期を加速させる正のフィードバック機構です。" },
    { cat: "気候・海洋", q: "深層海洋循環の主な沈み込み場所はどこか。", a: ["北大西洋（グリーンランド沖）", "北太平洋", "インド洋", "赤道付近"], exp: "ここで冷たく塩分濃度の高い水が沈み込み、コンベアベルトが始動します。" },
    { cat: "気候・海洋", q: "最終氷期中の数千年規模の急激な気候変動サイクルは？", a: ["ダンスガード・オシュガーサイクル", "ミランコビッチ・サイクル", "ウィルソン・サイクル", "エルニーニョ"], exp: "D-Oサイクル。グリーンランド氷床コアで発見されました。" },
    { cat: "気候・海洋", q: "D-Oサイクルが束になり、最後にハインリッヒ・イベントを起こす大きな周期は？", a: ["ボンド・サイクル", "ハドレー循環", "炭素循環", "水循環"], exp: "徐々に寒冷化し、氷山流出でリセットされるサイクルです。" },
    { cat: "気候・海洋", q: "ハインリッヒ・イベントで海底に堆積する層は？", a: ["IRD層（氷河性砕屑物）", "マンガン団塊", "チャート", "石灰岩"], exp: "氷山が運んできた石などが海底に落ちて形成されます。" },
    { cat: "気候・海洋", q: "北半球寒冷化⇔南半球温暖化の逆位相変動を何と呼ぶ？", a: ["バイポーラ・シーソー", "テレコネクション", "南方振動", "ダイポールモード"], exp: "海洋循環による熱輸送のバランスが変わることで起きます。" },
    { cat: "気候・海洋", q: "17世紀後半の太陽黒点が極端に少なかった時期は？", a: ["マウンダー極小期", "シュペーラー極小期", "ダルトン極小期", "完新世最適期"], exp: "小氷期の寒冷化の一因とされます。" },
    { cat: "気候・海洋", q: "火山噴火による寒冷化が長引くのは噴煙がどこに達した時？", a: ["成層圏", "対流圏", "中間圏", "熱圏"], exp: "成層圏では雨が降らないため、エアロゾルが長期間滞留します。" },
    { cat: "気候・海洋", q: "赤道で上昇し、緯度30度付近で下降する大気循環は？", a: ["ハドレー循環", "フェレル循環", "極循環", "モンスーン"], exp: "熱帯地域を支配する循環です。" },
    { cat: "気候・海洋", q: "深層海洋循環（熱塩循環）の一巡にかかる時間は？", a: ["約1000〜2000年", "約10年", "約1万年", "数日"], exp: "非常にゆっくりとした地球規模の循環です。" },
    { cat: "気候・海洋", q: "D-Oサイクルの「温暖な時期」を何と呼ぶか。", a: ["亜間氷期 (Interstadial)", "亜氷期 (Stadial)", "間氷期", "氷期"], exp: "逆に寒冷な時期を亜氷期と呼びます。" },

    // --- 5. 地殻・災害・海水準 (18問) ---
    { cat: "地殻・災害", q: "最終氷期最盛期(LGM)の海水準は現在よりどうだった？", a: ["約120m低かった", "約120m高かった", "約5m低かった", "同じ"], exp: "陸上に大量の氷があったため、海の水が減っていました。" },
    { cat: "地殻・災害", q: "深海底コアの酸素同位体比(δ18O)が「重く」なるのはいつ？", a: ["氷期", "間氷期", "海水温が高い時", "無関係"], exp: "軽い16Oが蒸発して氷床に固定され、海に重い18Oが残るためです。" },
    { cat: "地殻・災害", q: "現在の完新世はMIS(海洋酸素同位体ステージ)いくつか。", a: ["MIS 1", "MIS 2", "MIS 5e", "MIS 11"], exp: "奇数が間氷期、偶数が氷期です。" },
    { cat: "地殻・災害", q: "日本などの「ファーフィールド」で約7000年前に海水準が高くなった原因は？", a: ["氷床の融解による海水量上昇", "ハイドロアイソスタシー", "プレート隆起", "熱膨張"], exp: "水イドロアイソスタシーによる沈降よりも海水量の増加が卓越していたためです。" },
    { cat: "地殻・災害", q: "ヤンガー・ドライアスの原因とされる淡水流出源は？", a: ["アガシー湖", "五大湖", "ミシシッピ川", "ハドソン湾"], exp: "北米の巨大な氷河湖が決壊し、淡水が大西洋に流入しました。" },
    { cat: "地殻・災害", q: "完新世中期の温暖期(気候最適期)の日本の海進現象は？", a: ["縄文海進", "平安海進", "弥生海退", "昭和海進"], exp: "大阪平野の奥まで海が入り込んでいました。" },
    { cat: "地殻・災害", q: "サンゴの「マイクロアトール」から復元できるものは？", a: ["過去の海水準(地殻変動)", "海水温", "塩分濃度", "日射量"], exp: "海面ギリギリで成長する形状から、数cm単位の変動がわかります。" },
    { cat: "地殻・災害", q: "地震による隆起の証拠となる生物遺骸の代表例は？", a: ["ヤツシロガイ", "カキ", "フジツボ", "サンゴ"], exp: "房総半島の岩壁などに付着したまま化石化しています。" },
    { cat: "地殻・災害", q: "1703年元禄関東地震で形成された段丘面は？", a: ["元禄段丘(Numa IV)", "大正段丘", "沼面", "下末吉面"], exp: "房総半島南部に見られる最も新しい段丘の一つです。" },
    { cat: "地殻・災害", q: "「正断層」を形成する力はどれか。", a: ["引張応力(引っ張る)", "圧縮応力(押す)", "剪断応力(ずれる)", "ねじれ"], exp: "上盤がずり落ちる断層です。" },
    { cat: "地殻・災害", q: "「逆断層」を形成する力はどれか。", a: ["圧縮応力(押す)", "引張応力(引っ張る)", "剪断応力(ずれる)", "重力"], exp: "上盤がのし上がる断層です。" },
    { cat: "地殻・災害", q: "1891年の濃尾地震で出現した有名な断層は？", a: ["根尾谷断層", "野島断層", "丹那断層", "糸魚川静岡構造線"], exp: "最大6mもの段差が地表に現れました。" },
    { cat: "地殻・災害", q: "「津波てんでんこ」の意味として正しいのは？", a: ["家族を待たず各自で逃げる", "手をつないで逃げる", "全員集まるまで待つ", "荷物を持って逃げる"], exp: "共倒れを防ぐための、東北地方の防災教訓です。" },
    { cat: "地殻・災害", q: "2014年御嶽山噴火のタイプは？", a: ["水蒸気噴火", "マグマ噴火", "プリニー式噴火", "溶岩流出"], exp: "地下水が加熱されて起こる突発的な噴火でした。" },
    { cat: "地殻・災害", q: "氷床融解後、旧氷床域（スカンジナビア等）で起きる現象は？", a: ["激しい隆起（リバウンド）", "沈降", "水平移動", "変化なし"], exp: "重しが取れて浮き上がる現象です。" },
    { cat: "地殻・災害", q: "緊急地震速報が検知するのはP波・S波のどちらか。", a: ["P波", "S波", "表面波", "津波"], exp: "速いP波を検知して、遅いS波が来る前に知らせます。" },
    { cat: "地殻・災害", q: "2011年東北沖地震の津波高は過去最大クラスと比べどうだった？", a: ["上回っていた", "同程度だった", "低かった", "記録なし"], exp: "明治・昭和三陸を上回る高さでした。" },
    { cat: "地殻・災害", q: "水と土砂が一体となって高速で流下する災害は？", a: ["土石流", "地すべり", "崖崩れ", "液状化"], exp: "地すべりよりも速度が速いのが特徴です。" },

    // --- 6. 生物・人類・その他 (13問) ---
    { cat: "生物・人類", q: "中期更新世以降の寒冷・草原性のゾウは？", a: ["ナウマンゾウ", "トウヨウゾウ", "アケボノゾウ", "ミエゾウ"], exp: "マンモスと共に寒冷な気候に適応しました。" },
    { cat: "生物・人類", q: "津軽海峡に位置する動物分布境界線は？", a: ["ブラキストン線", "ウォーレス線", "渡瀬線", "八田線"], exp: "北海道（マンモス系）と本州（ナウマンゾウ系）を分けます。" },
    { cat: "生物・人類", q: "現代日本人の遺伝的構成を説明する最新モデルは？", a: ["三重構造モデル", "二重構造モデル", "単一民族説", "南方起源説"], exp: "縄文＋北東アジア＋東アジアの3集団の混血とされます。" },
    { cat: "生物・人類", q: "日本列島の山地帯（冷温帯）を代表する植生は？", a: ["落葉広葉樹林（ブナなど）", "常緑広葉樹林（シイ・カシ）", "常緑針葉樹林（シラビソ）", "高山低木林"], exp: "四季の変化が明瞭な森です。" },
    { cat: "生物・人類", q: "人類（ヒト族）がチンパンジーと分岐したのは約何年前？", a: ["約700万年前", "約200万年前", "約20万年前", "約4000年前"], exp: "直立二足歩行の開始時期です。" },
    { cat: "生物・人類", q: "最初に出アフリカを果たした人類は？", a: ["ホモ・エレクトス", "ホモ・サピエンス", "アウストラロピテクス", "ネアンデルタール人"], exp: "ジャワ原人や北京原人もこの一種です。" },
    { cat: "生物・人類", q: "メタセコイア植物群が日本から絶滅したのはいつ頃？", a: ["アズキ火山灰(約85万年前)の少し後", "第四紀の始まり", "最終氷期最盛期", "縄文時代"], exp: "寒冷化の激化により姿を消しました。" },
    { cat: "生物・人類", q: "日本固有の小型のゾウ化石は？", a: ["アケボノゾウ", "トウヨウゾウ", "ナウマンゾウ", "マンモス"], exp: "大阪層群下部に見られる、日本列島で進化したゾウです。" },
    { cat: "生物・人類", q: "東洋区とオーストラリア区の境界線を何と呼ぶ？", a: ["ウォーレス線", "ブラキストン線", "渡瀬線", "ウェーバー線"], exp: "バリ島とロンボク島の間などを通ります。" },
    { cat: "生物・人類", q: "日本列島の丘陵帯（低地）を代表する植生は？", a: ["常緑広葉樹林（シイ・カシ）", "落葉広葉樹林", "針葉樹林", "草原"], exp: "照葉樹林とも呼ばれます。" },
    { cat: "生物・人類", q: "ネアンデルタール人の石器文化は？", a: ["ムスティエ文化", "オルドワン文化", "アシュール文化", "縄文文化"], exp: "剥片石器を主体とする文化です。" },
    { cat: "生物・人類", q: "ホモ・サピエンス誕生は約何万年前？", a: ["約20〜30万年前", "約700万年前", "約5万年前", "約100万年前"], exp: "アフリカで誕生しました。" },
    { cat: "生物・人類", q: "全北植物界に含まれる地域は？", a: ["北米、欧州、北アジア", "アフリカ、インド", "中南米", "オーストラリア"], exp: "北半球の大部分を占める植物区系です。" }
];

// --- アプリ制御 ---
let currentQuiz = [];
let currentIndex = 0;
let score = 0;

function shuffle(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
}

function initApp() {
    currentQuiz = shuffle([...quizData]);
    currentIndex = 0;
    score = 0;
    showQuestion();
}

function showQuestion() {
    const app = document.getElementById('app');
    const status = document.getElementById('status');
    
    if (currentIndex >= currentQuiz.length) {
        showResult();
        return;
    }

    const qData = currentQuiz[currentIndex];
    status.textContent = `第${currentIndex + 1}問 / 全${currentQuiz.length}問 (正解数: ${score})`;

    // 選択肢の生成
    // qData.a[0] が正解。ボタンには idx=0 なら正解(true)という情報を埋め込む
    let choices = qData.a.map((text, idx) => ({ text: text, isCorrect: idx === 0 }));
    choices = shuffle(choices);

    let html = `
        <div class="card">
            <div class="q-meta">カテゴリ: ${qData.cat}</div>
            <div class="q-text">${qData.q}</div>
            <div class="choices" id="choices-box">
                ${choices.map(c => `
                    <button class="choice-btn" data-is-correct="${c.isCorrect}" onclick="checkAnswer(this)">
                        ${c.text}
                    </button>
                `).join('')}
            </div>
            <div class="explanation" id="exp-box">
                <strong>【解説】</strong><br>${qData.exp}
                <button class="btn-next" onclick="nextQuestion()">次の問題へ</button>
            </div>
        </div>
    `;
    app.innerHTML = html;
}

function checkAnswer(btn) {
    const parent = document.getElementById('choices-box');
    const expBox = document.getElementById('exp-box');
    
    // 二重回答防止
    if (parent.style.pointerEvents === 'none') return;
    parent.style.pointerEvents = 'none';

    // 押されたボタンが正解かどうか
    const isCorrect = (btn.getAttribute('data-is-correct') === 'true');

    if (isCorrect) {
        btn.classList.add('correct');
        score++;
    } else {
        btn.classList.add('wrong');
        // 間違えた場合、正解のボタンを緑色にする
        const buttons = parent.querySelectorAll('.choice-btn');
        buttons.forEach(b => {
            if (b.getAttribute('data-is-correct') === 'true') {
                b.classList.add('correct');
            }
        });
    }
    expBox.style.display = 'block';
}

function nextQuestion() {
    currentIndex++;
    showQuestion();
}

function showResult() {
    const app = document.getElementById('app');
    const percentage = Math.round((score / currentQuiz.length) * 100);
    
    let msg = "";
    if (percentage >= 90) msg = "素晴らしい！完璧に近いです！";
    else if (percentage >= 70) msg = "合格圏内です！その調子！";
    else msg = "もう少し復習しましょう！";

    app.innerHTML = `
        <div class="card result-screen">
            <h2>終了！</h2>
            <div class="score-circle">
                <span class="score-num">${score}</span>
                <span class="score-label">/ ${currentQuiz.length}</span>
            </div>
            <h3>${msg}</h3>
            <button class="btn-next" onclick="initApp()">もう一度挑戦する</button>
        </div>
    `;
}

window.onload = initApp;
</script>
</body>

</html>

